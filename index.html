<!DOCTYPE HTML>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
    <title>ARIA Switch Controls</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    </script>
    <link rel="stylesheet" href="https://scottaohara.github.io/a11y_styled_form_controls/src/assets/css/--demo-only--.css">
    <link rel="stylesheet" href="https://scottaohara.github.io/a11y_styled_form_controls/src/assets/css/--shared--.css">
    <link rel="stylesheet" href="assets/css/on-off-switch.css">
    <link rel="stylesheet" href="assets/css/toggle-switch.css">
    <link rel="stylesheet" href="assets/css/check-switch.css">
  </head>

  <body id="body">
    <div id="page" class="demo-wrap">

      <header class="demo-wrap__header">
        <p class="demo-wrap__header__title">
          Accessible Styled Form Controls
        </p>
        <nav>
          <a href="https://github.com/scottaohara/a11y_styled_form_controls">See source on GitHub</a>,
          <a href="https://scottaohara.github.io/a11y_styled_form_controls/">Index of styled form controls</a>
        </nav>
      </header>

      <main aria-label="Content">
        <div class="demo">
          <div>
            <h1>
              <abbr title="Accessible Rich Internet Applications">ARIA</abbr> Switch Demos
            </h1>
            <p>Published: <span>March 20, 2017</span></p>
            <p>Last updated: <span>January 23, 2022</span></p>
          </div>

          <h2>
            Pattern Demos
          </h2>

          <p><code>&lt;button></code> base</p>
          <button type=button data-switch class="switch-toggle" data-switch-labels disabled>
            Enable dark mode
          </button>

          <p><code>&lt;span></code> base</p>
          <span data-switch class="switch-toggle" hidden>
            Enable dark mode (no visible state labels)
          </span>

          <p><code>&lt;input type=checkbox></code> base</p>
          <label class="check-switch">
            <input type="checkbox" data-switch data-keep-disabled disabled>
            Enable dark mode (disabled example)
          </label>

          <p><code>&lt;div></code> base</p>
          <div class="on-off-switch" data-switch id="enabler" hidden>
            Enable the next switch
          </div>

          <p><code>&lt;a></code> base</p>
          <a id="target" href="#" data-keep-disabled aria-disabled="true" class="on-off-switch" data-switch>
            Enable something else
          </a>


          <section class="demo-details">
            <h3>
              Pattern Details
            </h3>

            <details>
              <summary>Pattern Markup (before script runs)</summary>
              <pre><code>&lt;button data-switch
  type="button"
  class="switch-toggle"
  data-switch-labels
  disabled
>
  Dark mode
&lt;/button>

&lt;span data-switch class="switch-toggle" hidden>
  Dark mode (no visible state labels)
&lt;/span>

&lt;label class="check-switch">
  &lt;input type="checkbox" data-switch data-keep-disabled disabled>
  Enable dark mode
&lt;/label>

&lt;div class="on-off-switch" data-switch id="enabler" hidden>
  Enable the next switch
&lt;/div>

&lt;a id="target"
  href="#"
  data-keep-disabled
  aria-disabled="true"
  class="on-off-switch"
  data-switch
>
  Enable something else
&lt;/a></code></pre>
            </details>
            
            <details>
              <summary>Pattern Markup (after script runs)</summary>
              <pre><code>&lt;button data-switch 
  type="button"
  class="switch-toggle" 
  data-switch-labels 
  role="switch" 
  aria-checked="false"
>
  Dark mode
  &lt;span aria-hidden="true" class="show-labels">&lt;/span>
&lt;/button>


&lt;span data-switch 
  class="switch-toggle" 
  role="switch" 
  tabindex="0" 
  aria-checked="false"
>
  Dark mode (no visible state labels)
  &lt;span aria-hidden="true">&lt;/span>
&lt;/span>


&lt;label class="check-switch">
  &lt;input type="checkbox" 
    data-switch 
    data-keep-disabled 
    disabled 
    role="switch"
  >
  Enable dark mode
  &lt;span aria-hidden="true">&lt;/span>
&lt;/label>


&lt;div class="on-off-switch" 
  data-switch 
  id="enabler" 
  role="switch"
  tabindex="0" 
  aria-checked="false"
>
  Enable the next switch
  &lt;span aria-hidden="true">&lt;/span>
&lt;/div>


&lt;a id="target" 
  data-keep-disabled 
  aria-disabled="true" 
  class="on-off-switch" 
  data-switch 
  role="switch" 
  tabindex="-1" 
  aria-checked="false"
>
  Enable something else
  &lt;span aria-hidden="true">&lt;/span>
&lt;/a></code></pre>
            </details>

            <p>
              A switch is meant to function similarly to a checkbox or toggle button, but assistive technologies are meant to announce it in a manner that is consistent with its on-screen appearance as an on/off sort of UI component.
            </p>

            <p>
              This particular pattern uses a <code>&lt;button></code> as the base element that is then modified into a <code>role="switch"</code> with JavaScript. When a <code>&lt;button></code> is modified to be exposed as a <code>switch</code>, the <code>aria-checked</code> attribute needs to be added, and managed, to appropriately convey the current state to assistive technologies (AT).
            </p>

            <p>
              For more information about switches and how AT, such as screen readers, interpret them, please review <a href="https://scottaohara.github.io/a11y_styled_form_controls/src/checkbox--switch/">the checkbox switch pattern</a>.
            </p>

            <p>
              For more information on the JavaScript and markup used, please see the
              <a href="https://github.com/scottaohara/aria-switch-button">ReadMe on the GitHub repo for this pattern</a>.
            </p>

            <h4>Usage note</h4>
            <p>
              Presently there are
              <a href="https://scottaohara.github.io/a11y_styled_form_controls/src/checkbox--switch/#affects_on_sr">inconsistencies with screen readers and ARIA switches</a>.

              Please review them to understand how the role is treated depending on screen reader and browser pairings, and if there are any gaps you may need to consider when considering the use of this role.
            </p>
          </section>

          <h3>
            Continue reading
          </h3>
          <p>
            For more information about switches, please read the
            <a href="https://w3c.github.io/aria/#switch"><abbr>ARIA</abbr> specification for the  <code>switch</code> role</a>.
            <a href="http://inclusive-components.club/toggle-button/">Inclusive Components Toggle Buttons, by Heydon Pickering</a>.
          </p>
        </div>
      </main>

    </div>
    <script src="index.js"></script>
    <script>
      const selector = '[data-switch]';
      const els = document.querySelectorAll(selector);

      for ( let i = 0; i < els.length; i++ ) {
        const dis = new ARIAswitch( els[i] );
      }

      const test = document.getElementById('enabler');
      const subject = document.getElementById('target');

      const demo = function ( e ) {
        if ( e.target.getAttribute('aria-checked') === 'true' ) {
          subject.removeAttribute('aria-disabled');
          subject.removeAttribute('data-keep-disabled');
          subject.tabIndex = 0;
        }
        else {
          subject.setAttribute('aria-disabled', 'true');
          subject.setAttribute('data-keep-disabled', '');
          subject.tabIndex = -1;
        }
      }

      test.addEventListener('click', demo, false);
      test.addEventListener('keypress', demo, false)
    </script>
  </body>
</html>
